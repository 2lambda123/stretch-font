{"version":3,"file":"stretch-font.min.js","sources":["stretch-font.js"],"sourcesContent":["/**\n * The function `useStretchFont` dynamically adjusts font size based on the width of the parent element.\n * @param [className=stretch-font] - The name of the class that will be used to identify the elements that will have their\n * font size stretched. By default, it is set to \"stretch-font\".\n * @returns An object with a single method `rebuild`.\n */\nfunction useStretchFont(className = \"stretch-font\") {\n  let Nodes = [];\n  let observer = null;\n\n  /**\n   * This function saves the font size of an element and sets it as the font size of its child element.\n   * @param el - The HTML element that needs to have its font size saved and set.\n   * @returns The function does not have a return statement, so it does not return anything.\n   */\n  function saveFontSize(el) {\n    if (el.firstChild.classList?.contains(className + \"__save\")) return;\n    const n = document.createElement(\"div\");\n    n.classList.add(className + \"__save\");\n    n.innerHTML = el.innerText;\n    n.style.fontSize = getFontSize(el);\n    el.insertBefore(n, el.firstChild);\n  }\n\n  /**\n   * The function returns the font size of an element.\n   * @param el - The parameter \"el\" is a reference to a DOM element whose font size we want to retrieve.\n   * @returns The function `getFontSize` is returning the computed font size of the element passed as an argument.\n   */\n  function getFontSize(el) {\n    return self.getComputedStyle(el, null).getPropertyValue(\"font-size\");\n  }\n\n  /**\n   * The function sets the font size of an element based on its width and optional minimum and maximum font sizes.\n   * @param el - The parameter `el` is a reference to an HTML element.\n   */\n  function setFontSize(el) {\n    const fz = getFontSize(el.firstChild).slice(0, -2);\n\n    const calc = (el.offsetWidth / el.firstChild.offsetWidth) * +fz * 0.97;\n    let { stretchMin: min, stretchMax: max } = el.dataset;\n    min !== undefined && (min = +(min || fz));\n    max !== undefined && (max = +(max || fz));\n\n    const width = calc > max ? max : calc < min ? min : calc;\n    el.style.fontSize = width + \"px\";\n  }\n\n  /**\n   * The function rebuild() iterates through Nodes, saves the font size of each element, and observes them using an\n   * observer if available.\n   */\n  function rebuild() {\n    Nodes.forEach((el) => {\n      saveFontSize(el);\n      observer && observer.observe(el);\n    });\n  }\n\n  function entries(entries) {\n    self.requestAnimationFrame(() => entries.forEach((x) => setFontSize(x.target)));\n  }\n\n  self.addEventListener(\"DOMContentLoaded\", () => {\n    Nodes = document.querySelectorAll(\".\" + className) || [];\n    observer = new ResizeObserver(entries);\n    rebuild();\n  });\n\n  return {\n    rebuild,\n  };\n}\n\nexport default useStretchFont;\n"],"names":["className","arguments","length","undefined","Nodes","observer","getFontSize","el","self","getComputedStyle","getPropertyValue","rebuild","forEach","_el$firstChild$classL","firstChild","classList","contains","n","document","createElement","add","innerHTML","innerText","style","fontSize","insertBefore","saveFontSize","observe","entries","requestAnimationFrame","x","fz","slice","calc","offsetWidth","_el$dataset","dataset","min","stretchMin","max","stretchMax","width","setFontSize","target","addEventListener","querySelectorAll","ResizeObserver"],"mappings":"+CAMA,WAAoD,IAA5BA,EAASC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,eAC9BG,EAAQ,GACRC,EAAW,KAqBf,SAASC,EAAYC,GACnB,OAAOC,KAAKC,iBAAiBF,EAAI,MAAMG,iBAAiB,YAC1D,CAsBA,SAASC,IACPP,EAAMQ,SAAQ,SAACL,IAvCjB,SAAsBA,GAAI,IAAAM,EACxB,GAA2BA,QAA3BA,EAAIN,EAAGO,WAAWC,iBAAdF,IAAuBA,IAAvBA,EAAyBG,SAAShB,EAAY,UAAlD,CACA,IAAMiB,EAAIC,SAASC,cAAc,OACjCF,EAAEF,UAAUK,IAAIpB,EAAY,UAC5BiB,EAAEI,UAAYd,EAAGe,UACjBL,EAAEM,MAAMC,SAAWlB,EAAYC,GAC/BA,EAAGkB,aAAaR,EAAGV,EAAGO,WALuC,CAM/D,CAiCIY,CAAanB,GACbF,GAAYA,EAASsB,QAAQpB,EAC/B,GACF,CAEA,SAASqB,EAAQA,GACfpB,KAAKqB,uBAAsB,WAAA,OAAMD,EAAQhB,SAAQ,SAACkB,GAAC,OAxBrD,SAAqBvB,GACnB,IAAMwB,EAAKzB,EAAYC,EAAGO,YAAYkB,MAAM,GAAI,GAE1CC,EAAQ1B,EAAG2B,YAAc3B,EAAGO,WAAWoB,aAAgBH,EAAK,IAClEI,EAA2C5B,EAAG6B,QAA5BC,EAAGF,EAAfG,WAA6BC,EAAGJ,EAAfK,gBACfrC,IAARkC,IAAsBA,IAAQA,GAAON,SAC7B5B,IAARoC,IAAsBA,IAAQA,GAAOR,IAErC,IAAMU,EAAQR,EAAOM,EAAMA,EAAMN,EAAOI,EAAMA,EAAMJ,EACpD1B,EAAGgB,MAAMC,SAAWiB,EAAQ,IAC9B,CAc0DC,CAAYZ,EAAEa,aACxE,CAQA,OANAnC,KAAKoC,iBAAiB,oBAAoB,WACxCxC,EAAQc,SAAS2B,iBAAiB,IAAM7C,IAAc,GACtDK,EAAW,IAAIyC,eAAelB,GAC9BjB,GACF,IAEO,CACLA,QAAAA,EAEJ"}