{"version":3,"file":"stretch-font.min.js","sources":["stretch-font.js"],"sourcesContent":["function useStretchFont(className = \"stretch-font\") {\n  let Nodes = [];\n\n  function saveFontSize(el) {\n    const n = document.createElement(\"div\");\n    n.classList.add(className + '__save');\n    n.innerHTML = el.innerText;\n    n.style.fontSize = getFontSize(el);\n    el.insertBefore(n, el.firstChild);\n    setFontSize(el);\n  }\n\n  function getFontSize(el) {\n    return window.getComputedStyle(el, null).getPropertyValue(\"font-size\");\n  }\n\n  function setFontSize(el) {\n    const fz = getFontSize(el.firstChild).slice(0, -2);\n\n    const calc = (el.offsetWidth / el.firstChild.offsetWidth) * +fz * 0.97;\n    let { fontStretchMin: min, fontStretchMax: max } = el.dataset;\n    min !== undefined && (min = +(min || fz));\n    max !== undefined && (max = +(max || fz));\n\n    const width = calc > max ? max : calc < min ? min : calc;\n    el.style.fontSize = width + \"px\";\n  }\n\n  function rebuild() {\n    Nodes = document.querySelectorAll('.' + className) || [];\n    Nodes.forEach(saveFontSize);\n  }\n\n  window.addEventListener(\"DOMContentLoaded\", rebuild);\n  window.onresize = () => Nodes.forEach(setFontSize);\n\n  return {\n    rebuild\n  }\n}\n\nexport default useStretchFont;\n"],"names":["className","arguments","length","undefined","Nodes","saveFontSize","el","n","document","createElement","classList","add","innerHTML","innerText","style","fontSize","getFontSize","insertBefore","firstChild","setFontSize","window","getComputedStyle","getPropertyValue","fz","slice","calc","offsetWidth","_el$dataset","dataset","min","fontStretchMin","max","fontStretchMax","width","rebuild","querySelectorAll","forEach","addEventListener","onresize"],"mappings":"+CAAA,WAAoD,IAA5BA,EAASC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,eAC9BG,EAAQ,GAEZ,SAASC,EAAaC,GACpB,IAAMC,EAAIC,SAASC,cAAc,OACjCF,EAAEG,UAAUC,IAAIX,EAAY,UAC5BO,EAAEK,UAAYN,EAAGO,UACjBN,EAAEO,MAAMC,SAAWC,EAAYV,GAC/BA,EAAGW,aAAaV,EAAGD,EAAGY,YACtBC,EAAYb,EACd,CAEA,SAASU,EAAYV,GACnB,OAAOc,OAAOC,iBAAiBf,EAAI,MAAMgB,iBAAiB,YAC5D,CAEA,SAASH,EAAYb,GACnB,IAAMiB,EAAKP,EAAYV,EAAGY,YAAYM,MAAM,GAAI,GAE1CC,EAAQnB,EAAGoB,YAAcpB,EAAGY,WAAWQ,aAAgBH,EAAK,IAClEI,EAAmDrB,EAAGsB,QAAhCC,EAAGF,EAAnBG,eAAqCC,EAAGJ,EAAnBK,oBACnB7B,IAAR0B,IAAsBA,IAAQA,GAAON,SAC7BpB,IAAR4B,IAAsBA,IAAQA,GAAOR,IAErC,IAAMU,EAAQR,EAAOM,EAAMA,EAAMN,EAAOI,EAAMA,EAAMJ,EACpDnB,EAAGQ,MAAMC,SAAWkB,EAAQ,IAC9B,CAEA,SAASC,KACP9B,EAAQI,SAAS2B,iBAAiB,IAAMnC,IAAc,IAChDoC,QAAQ/B,EAChB,CAKA,OAHAe,OAAOiB,iBAAiB,mBAAoBH,GAC5Cd,OAAOkB,SAAW,WAAA,OAAMlC,EAAMgC,QAAQjB,EAAY,EAE3C,CACLe,QAAAA,EAEJ"}